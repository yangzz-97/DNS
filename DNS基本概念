1、DNS的工作原理
DNS域名系统，用来将主机名或者域名转换成IP地址。通俗讲是域名解析。

tcp  udp协议，主要使用udp协议，端口号53

分为正向解析和反向解析：
反向解析：ip>>>主机名，即通过IP地址解析主机名
正向解析：主机名>>>ip，即通过主机名解析IP地址


2、域、子域、区域的概念
（1）域：域是资源记录的集合，这些资源记录以公用名称结尾并表示DN名称空间的整个子树。例如exampl.com，最大的域可能就是root域（.） 

（2）子域：子域是作为一个域的子树的域。在讨论两个域之间的相互关系使用这个术语。例如lab.exple.com就是example.com的子域

（3）区域：区域是指特定名称服务器直接负责或对齐具有权威的某个域的组成部分。


3、DNS查询分析
系统需要使用DNS服务器进行域名解析时，它首先会向/etc/resolve.conf中列出的服务器依次发送查询，知道它得到响应或查询完全部的服务器。host或者dig命令可以用于手动查询DNS名称。

4、获得的数据类型

（1）本地权威数据：查询到的数据信息，是驻留在服务器对其有权威的区域中，然后响应给客户端。这种响应就是权威答案。会带有aa的标志。

（2）本地缓存的非权威数据：如果是从服务的缓存中查询到的信息，就不是权威的数据，不会带有aa的标志。

（3）递归获取的远程非权威数据：到别的服务器上获取的权威数据。


5、DNS资源记录
DNS资源记录简称RR，是DNS区域中的条目，用于指定有关该区域中某个特定名称或对象的信息。
一条资源记录包括：type、TTL、class、data

TTL：资源记录的生存时间（秒），记录之前解析过的记录，下次再有同样的请求就直接发送结果给客户端，简单说就是记录存活的时间，超过这个时间，记录就会消失。

type：有几个重要的类型
（1）A记录：ipv4地址
A资源记录将主机名映射到iPv4地址

（2）AAAA记录：ipv6地址
AAAA资源记录将主机名映射到iPv6地址

（3）CNAME记录：规范名称记录
CNAME资源记录将一个记录别名化为另一个记录（规范名称），查询时使用规范名称进行查询。

（4）PTR记录：指针记录
PTR记录将IPV4或者IPV6地址映射到主机名，用于反向解析
注意：显示的结果是逆向显示的。

（5）NS记录：名称服务器记录
将域名映射到DNS名称服务器

（6）SOA记录：授权起始记录
记录中指定哪个名称服务器是主服务器，哪个是从服务器。
SOA记录中包含的信息：名称服务器的主机名、refresh（刷新间隔时间）、Retry（刷新失败后重新刷新的间隔时间）、Expiry（如果刷新失败，使用副本进行查询的等待时间）、Minumum（如果查询某个名称不存在，记录到缓存中的等待时间）

无论是客户端还是服务端，都有以下记录：
一个或者多个A和AAAA记录，用于将主机名映射到ipv4或者IPPV6地址；
每个ip地址有一个PTR记录，用于映射主机名，用于反向解析；
（可选）一个CNAME记录，用于映射到其规范的主机名。
一个SOA记录，用于记录区域的工作方式。
